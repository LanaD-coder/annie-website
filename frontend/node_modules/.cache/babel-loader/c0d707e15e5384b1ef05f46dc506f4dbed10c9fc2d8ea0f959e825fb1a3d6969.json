{"ast":null,"code":"import _objectSpread from\"C:/projects/annie-website/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from\"react\";import\"../styles.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function BookingSection(){const[bookings,setBookings]=useState([]);const[formData,setFormData]=useState({name:\"\",email:\"\",date:\"\",time:\"\",service:\"\"});const[message,setMessage]=useState(\"\");const[date,setDate]=useState(\"\");const[time,setTime]=useState(\"\");useEffect(()=>{fetch(\"/bookings\").then(res=>res.json()).then(data=>setBookings(data)).catch(err=>console.error(err));},[]);const handleChange=e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{[e.target.name]:e.target.value}));};const handleSubmit=async e=>{e.preventDefault();const selectedDate=formData.date;const selectedTime=formData.time;// Prevent more than 5 total per date\nconst bookingsOnDate=bookings.filter(b=>b.date===selectedDate);if(bookingsOnDate.length>=5){setMessage(\"This date is fully booked\");return;}// Prevent double booking for the same time\nconst sameTimeBooking=bookingsOnDate.find(b=>b.time===selectedTime);if(sameTimeBooking){setMessage(\"This time slot is already booked\");return;}try{const res=await fetch(\"/bookings\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(formData)});const data=await res.json();if(res.ok){setBookings([...bookings,data]);setMessage(\"Booking successfully created!\");setFormData({name:\"\",email:\"\",date:\"\",time:\"\",service:\"\"});}else{setMessage(data.error||\"Error creating booking\");}}catch(err){console.error(err);setMessage(\"Error connecting to server\");}};// Group bookings by date for calendar view\nconst bookingsByDate=bookings.reduce((acc,b)=>{acc[b.date]=acc[b.date]||[];acc[b.date].push(b);return acc;},{});return/*#__PURE__*/_jsxs(\"section\",{className:\"booking-section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Book an Appointment\"}),message&&/*#__PURE__*/_jsx(\"p\",{className:\"booking-message\",children:message}),/*#__PURE__*/_jsxs(\"form\",{className:\"booking-form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",placeholder:\"Name\",value:formData.name,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",placeholder:\"Email\",value:formData.email,onChange:handleChange}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"date\",value:formData.date,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",name:\"time\",value:formData.time,onChange:handleChange,required:true}),/*#__PURE__*/_jsxs(\"select\",{name:\"service\",value:formData.service,onChange:handleChange,required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Service\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Hairstyling & Braiding\",children:\"Hairstyling & Braiding\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Manicure & Pedicure\",children:\"Manicure & Pedicure\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Facials & Skincare\",children:\"Facials & Skincare\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Makeup Services\",children:\"Makeup Services\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Massage Therapy\",children:\"Massage Therapy\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Waxing & Hair Removal\",children:\"Waxing & Hair Removal\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Hair Coloring & Highlights\",children:\"Hair Coloring & Highlights\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Book Now\"})]}),/*#__PURE__*/_jsx(\"h3\",{children:\"Bookings Calendar\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"calendar-info\",children:[\"Days marked in \",/*#__PURE__*/_jsx(\"span\",{className:\"full-day\",children:\"red\"}),\" are fully booked and unavailable. Please select another date for your appointment.\"]}),bookings.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No bookings yet\"}):/*#__PURE__*/_jsx(\"div\",{className:\"calendar-grid\",children:Object.keys(bookingsByDate).sort().map(date=>/*#__PURE__*/_jsxs(\"div\",{className:\"calendar-day\",children:[/*#__PURE__*/_jsx(\"h4\",{children:date}),bookingsByDate[date].length>=5&&/*#__PURE__*/_jsx(\"p\",{className:\"full-day\",children:\"This day is full\"}),/*#__PURE__*/_jsx(\"ul\",{children:bookingsByDate[date].map(b=>/*#__PURE__*/_jsxs(\"li\",{children:[b.time,\" \\u2014 \",b.name,\" (\",b.service,\")\"]},b.id))})]},date))})]});}export default BookingSection;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","BookingSection","bookings","setBookings","formData","setFormData","name","email","date","time","service","message","setMessage","setDate","setTime","fetch","then","res","json","data","catch","err","console","error","handleChange","e","_objectSpread","target","value","handleSubmit","preventDefault","selectedDate","selectedTime","bookingsOnDate","filter","b","length","sameTimeBooking","find","method","headers","body","JSON","stringify","ok","bookingsByDate","reduce","acc","push","className","children","onSubmit","type","placeholder","onChange","required","Object","keys","sort","map","id"],"sources":["C:/projects/annie-website/frontend/src/components/BookingSection.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport \"../styles.css\";\r\n\r\nfunction BookingSection() {\r\n  const [bookings, setBookings] = useState([]);\r\n  const [formData, setFormData] = useState({\r\n    name: \"\",\r\n    email: \"\",\r\n    date: \"\",\r\n    time: \"\",\r\n    service: \"\",\r\n  });\r\n  const [message, setMessage] = useState(\"\");\r\n  const [date, setDate] = useState(\"\");\r\n  const [time, setTime] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    fetch(\"/bookings\")\r\n      .then((res) => res.json())\r\n      .then((data) => setBookings(data))\r\n      .catch((err) => console.error(err));\r\n  }, []);\r\n\r\n  const handleChange = (e) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    const selectedDate = formData.date;\r\n    const selectedTime = formData.time;\r\n\r\n    // Prevent more than 5 total per date\r\n    const bookingsOnDate = bookings.filter((b) => b.date === selectedDate);\r\n    if (bookingsOnDate.length >= 5) {\r\n      setMessage(\"This date is fully booked\");\r\n      return;\r\n    }\r\n\r\n    // Prevent double booking for the same time\r\n    const sameTimeBooking = bookingsOnDate.find((b) => b.time === selectedTime);\r\n    if (sameTimeBooking) {\r\n      setMessage(\"This time slot is already booked\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const res = await fetch(\"/bookings\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify(formData),\r\n      });\r\n\r\n      const data = await res.json();\r\n      if (res.ok) {\r\n        setBookings([...bookings, data]);\r\n        setMessage(\"Booking successfully created!\");\r\n        setFormData({ name: \"\", email: \"\", date: \"\", time: \"\", service: \"\" });\r\n      } else {\r\n        setMessage(data.error || \"Error creating booking\");\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      setMessage(\"Error connecting to server\");\r\n    }\r\n  };\r\n\r\n  // Group bookings by date for calendar view\r\n  const bookingsByDate = bookings.reduce((acc, b) => {\r\n    acc[b.date] = acc[b.date] || [];\r\n    acc[b.date].push(b);\r\n    return acc;\r\n  }, {});\r\n\r\n  return (\r\n    <section className=\"booking-section\">\r\n      <h2>Book an Appointment</h2>\r\n      {message && <p className=\"booking-message\">{message}</p>}\r\n\r\n      <form className=\"booking-form\" onSubmit={handleSubmit}>\r\n        <input\r\n          type=\"text\"\r\n          name=\"name\"\r\n          placeholder=\"Name\"\r\n          value={formData.name}\r\n          onChange={handleChange}\r\n          required\r\n        />\r\n        <input\r\n          type=\"email\"\r\n          name=\"email\"\r\n          placeholder=\"Email\"\r\n          value={formData.email}\r\n          onChange={handleChange}\r\n        />\r\n        <input\r\n          type=\"date\"\r\n          name=\"date\"\r\n          value={formData.date}\r\n          onChange={handleChange}\r\n          required\r\n        />\r\n        <input\r\n          type=\"time\"\r\n          name=\"time\"\r\n          value={formData.time}\r\n          onChange={handleChange}\r\n          required\r\n        />\r\n        <select\r\n          name=\"service\"\r\n          value={formData.service}\r\n          onChange={handleChange}\r\n          required\r\n        >\r\n          <option value=\"\">Select Service</option>\r\n          <option value=\"Hairstyling & Braiding\">Hairstyling & Braiding</option>\r\n          <option value=\"Manicure & Pedicure\">Manicure & Pedicure</option>\r\n          <option value=\"Facials & Skincare\">Facials & Skincare</option>\r\n          <option value=\"Makeup Services\">Makeup Services</option>\r\n          <option value=\"Massage Therapy\">Massage Therapy</option>\r\n          <option value=\"Waxing & Hair Removal\">Waxing & Hair Removal</option>\r\n          <option value=\"Hair Coloring & Highlights\">\r\n            Hair Coloring & Highlights\r\n          </option>\r\n        </select>\r\n        <button type=\"submit\">Book Now</button>\r\n      </form>\r\n\r\n      <h3>Bookings Calendar</h3>\r\n\r\n      {/* Explanation text */}\r\n      <p className=\"calendar-info\">\r\n        Days marked in <span className=\"full-day\">red</span> are fully booked\r\n        and unavailable. Please select another date for your appointment.\r\n      </p>\r\n\r\n      {bookings.length === 0 ? (\r\n        <p>No bookings yet</p>\r\n      ) : (\r\n        <div className=\"calendar-grid\">\r\n          {Object.keys(bookingsByDate)\r\n            .sort()\r\n            .map((date) => (\r\n              <div className=\"calendar-day\" key={date}>\r\n                <h4>{date}</h4>\r\n                {bookingsByDate[date].length >= 5 && (\r\n                  <p className=\"full-day\">This day is full</p>\r\n                )}\r\n                <ul>\r\n                  {bookingsByDate[date].map((b) => (\r\n                    <li key={b.id}>\r\n                      {b.time} — {b.name} ({b.service})\r\n                    </li>\r\n                  ))}\r\n                </ul>\r\n              </div>\r\n            ))}\r\n        </div>\r\n      )}\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default BookingSection;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}