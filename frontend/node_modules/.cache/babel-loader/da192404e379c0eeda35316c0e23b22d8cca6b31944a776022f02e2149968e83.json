{"ast":null,"code":"import _objectSpread from\"C:/projects/annie-website/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from\"react\";import\"../styles.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function BookingSection(){const[bookings,setBookings]=useState([]);const[formData,setFormData]=useState({name:\"\",email:\"\",date:\"\",time:\"\",service:\"\"});const[message,setMessage]=useState(\"\");useEffect(()=>{fetch(\"/bookings\").then(res=>res.json()).then(data=>setBookings(data)).catch(err=>console.error(err));},[]);const handleChange=e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{[e.target.name]:e.target.value}));};const handleSubmit=async e=>{e.preventDefault();// Prevent more than 5 total per date\nconst bookingsOnDate=bookings.filter(b=>b.date===date);if(bookingsOnDate.length>=5){return res.status(400).json({error:\"This date is fully booked\"});}// Prevent double booking for the same time\nconst sameTimeBooking=bookingsOnDate.find(b=>b.time===time);if(sameTimeBooking){return res.status(400).json({error:\"This time slot is already booked\"});}try{const res=await fetch(\"/bookings\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(formData)});const data=await res.json();if(res.ok){setBookings([...bookings,data]);setMessage(\"Booking successfully created!\");setFormData({name:\"\",email:\"\",date:\"\",time:\"\",service:\"\"});}else{setMessage(data.error||\"Error creating booking\");}}catch(err){console.error(err);setMessage(\"Error connecting to server\");}};// Group bookings by date for calendar view\nconst bookingsByDate=bookings.reduce((acc,b)=>{acc[b.date]=acc[b.date]||[];acc[b.date].push(b);return acc;},{});return/*#__PURE__*/_jsxs(\"section\",{className:\"booking-section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Book an Appointment\"}),message&&/*#__PURE__*/_jsx(\"p\",{className:\"booking-message\",children:message}),/*#__PURE__*/_jsxs(\"form\",{className:\"booking-form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",placeholder:\"Name\",value:formData.name,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",placeholder:\"Email\",value:formData.email,onChange:handleChange}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"date\",value:formData.date,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",name:\"time\",value:formData.time,onChange:handleChange,required:true}),/*#__PURE__*/_jsxs(\"select\",{name:\"service\",value:formData.service,onChange:handleChange,required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Service\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Hairstyling & Braiding\",children:\"Hairstyling & Braiding\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Manicure & Pedicure\",children:\"Manicure & Pedicure\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Facials & Skincare\",children:\"Facials & Skincare\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Makeup Services\",children:\"Makeup Services\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Massage Therapy\",children:\"Massage Therapy\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Waxing & Hair Removal\",children:\"Waxing & Hair Removal\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Hair Coloring & Highlights\",children:\"Hair Coloring & Highlights\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Book Now\"})]}),/*#__PURE__*/_jsx(\"h3\",{children:\"Bookings Calendar\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"calendar-info\",children:[\"Days marked in \",/*#__PURE__*/_jsx(\"span\",{className:\"full-day\",children:\"red\"}),\" are fully booked and unavailable. Please select another date for your appointment.\"]}),bookings.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No bookings yet\"}):/*#__PURE__*/_jsx(\"div\",{className:\"calendar-grid\",children:Object.keys(bookingsByDate).sort().map(date=>/*#__PURE__*/_jsxs(\"div\",{className:\"calendar-day\",children:[/*#__PURE__*/_jsx(\"h4\",{children:date}),bookingsByDate[date].length>=5&&/*#__PURE__*/_jsx(\"p\",{className:\"full-day\",children:\"This day is full\"}),/*#__PURE__*/_jsx(\"ul\",{children:bookingsByDate[date].map(b=>/*#__PURE__*/_jsxs(\"li\",{children:[b.time,\" \\u2014 \",b.name,\" (\",b.service,\")\"]},b.id))})]},date))})]});}export default BookingSection;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","BookingSection","bookings","setBookings","formData","setFormData","name","email","date","time","service","message","setMessage","fetch","then","res","json","data","catch","err","console","error","handleChange","e","_objectSpread","target","value","handleSubmit","preventDefault","bookingsOnDate","filter","b","length","status","sameTimeBooking","find","method","headers","body","JSON","stringify","ok","bookingsByDate","reduce","acc","push","className","children","onSubmit","type","placeholder","onChange","required","Object","keys","sort","map","id"],"sources":["C:/projects/annie-website/frontend/src/components/BookingSection.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport \"../styles.css\";\r\n\r\nfunction BookingSection() {\r\n  const [bookings, setBookings] = useState([]);\r\n  const [formData, setFormData] = useState({\r\n    name: \"\",\r\n    email: \"\",\r\n    date: \"\",\r\n    time: \"\",\r\n    service: \"\",\r\n  });\r\n  const [message, setMessage] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    fetch(\"/bookings\")\r\n      .then((res) => res.json())\r\n      .then((data) => setBookings(data))\r\n      .catch((err) => console.error(err));\r\n  }, []);\r\n\r\n  const handleChange = (e) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    // Prevent more than 5 total per date\r\n    const bookingsOnDate = bookings.filter((b) => b.date === date);\r\n    if (bookingsOnDate.length >= 5) {\r\n      return res.status(400).json({ error: \"This date is fully booked\" });\r\n    }\r\n\r\n    // Prevent double booking for the same time\r\n    const sameTimeBooking = bookingsOnDate.find((b) => b.time === time);\r\n    if (sameTimeBooking) {\r\n      return res\r\n        .status(400)\r\n        .json({ error: \"This time slot is already booked\" });\r\n    }\r\n\r\n    try {\r\n      const res = await fetch(\"/bookings\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify(formData),\r\n      });\r\n\r\n      const data = await res.json();\r\n      if (res.ok) {\r\n        setBookings([...bookings, data]);\r\n        setMessage(\"Booking successfully created!\");\r\n        setFormData({ name: \"\", email: \"\", date: \"\", time: \"\", service: \"\" });\r\n      } else {\r\n        setMessage(data.error || \"Error creating booking\");\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      setMessage(\"Error connecting to server\");\r\n    }\r\n  };\r\n\r\n  // Group bookings by date for calendar view\r\n  const bookingsByDate = bookings.reduce((acc, b) => {\r\n    acc[b.date] = acc[b.date] || [];\r\n    acc[b.date].push(b);\r\n    return acc;\r\n  }, {});\r\n\r\n  return (\r\n    <section className=\"booking-section\">\r\n      <h2>Book an Appointment</h2>\r\n      {message && <p className=\"booking-message\">{message}</p>}\r\n\r\n      <form className=\"booking-form\" onSubmit={handleSubmit}>\r\n        <input\r\n          type=\"text\"\r\n          name=\"name\"\r\n          placeholder=\"Name\"\r\n          value={formData.name}\r\n          onChange={handleChange}\r\n          required\r\n        />\r\n        <input\r\n          type=\"email\"\r\n          name=\"email\"\r\n          placeholder=\"Email\"\r\n          value={formData.email}\r\n          onChange={handleChange}\r\n        />\r\n        <input\r\n          type=\"date\"\r\n          name=\"date\"\r\n          value={formData.date}\r\n          onChange={handleChange}\r\n          required\r\n        />\r\n        <input\r\n          type=\"time\"\r\n          name=\"time\"\r\n          value={formData.time}\r\n          onChange={handleChange}\r\n          required\r\n        />\r\n        <select\r\n          name=\"service\"\r\n          value={formData.service}\r\n          onChange={handleChange}\r\n          required\r\n        >\r\n          <option value=\"\">Select Service</option>\r\n          <option value=\"Hairstyling & Braiding\">Hairstyling & Braiding</option>\r\n          <option value=\"Manicure & Pedicure\">Manicure & Pedicure</option>\r\n          <option value=\"Facials & Skincare\">Facials & Skincare</option>\r\n          <option value=\"Makeup Services\">Makeup Services</option>\r\n          <option value=\"Massage Therapy\">Massage Therapy</option>\r\n          <option value=\"Waxing & Hair Removal\">Waxing & Hair Removal</option>\r\n          <option value=\"Hair Coloring & Highlights\">\r\n            Hair Coloring & Highlights\r\n          </option>\r\n        </select>\r\n        <button type=\"submit\">Book Now</button>\r\n      </form>\r\n\r\n      <h3>Bookings Calendar</h3>\r\n\r\n      {/* Explanation text */}\r\n      <p className=\"calendar-info\">\r\n        Days marked in <span className=\"full-day\">red</span> are fully booked\r\n        and unavailable. Please select another date for your appointment.\r\n      </p>\r\n\r\n      {bookings.length === 0 ? (\r\n        <p>No bookings yet</p>\r\n      ) : (\r\n        <div className=\"calendar-grid\">\r\n          {Object.keys(bookingsByDate)\r\n            .sort()\r\n            .map((date) => (\r\n              <div className=\"calendar-day\" key={date}>\r\n                <h4>{date}</h4>\r\n                {bookingsByDate[date].length >= 5 && (\r\n                  <p className=\"full-day\">This day is full</p>\r\n                )}\r\n                <ul>\r\n                  {bookingsByDate[date].map((b) => (\r\n                    <li key={b.id}>\r\n                      {b.time} — {b.name} ({b.service})\r\n                    </li>\r\n                  ))}\r\n                </ul>\r\n              </div>\r\n            ))}\r\n        </div>\r\n      )}\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default BookingSection;\r\n"],"mappings":"uHAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,eAAe,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEvB,QAAS,CAAAC,cAAcA,CAAA,CAAG,CACxB,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGR,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACS,QAAQ,CAAEC,WAAW,CAAC,CAAGV,QAAQ,CAAC,CACvCW,IAAI,CAAE,EAAE,CACRC,KAAK,CAAE,EAAE,CACTC,IAAI,CAAE,EAAE,CACRC,IAAI,CAAE,EAAE,CACRC,OAAO,CAAE,EACX,CAAC,CAAC,CACF,KAAM,CAACC,OAAO,CAAEC,UAAU,CAAC,CAAGjB,QAAQ,CAAC,EAAE,CAAC,CAE1CC,SAAS,CAAC,IAAM,CACdiB,KAAK,CAAC,WAAW,CAAC,CACfC,IAAI,CAAEC,GAAG,EAAKA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACzBF,IAAI,CAAEG,IAAI,EAAKd,WAAW,CAACc,IAAI,CAAC,CAAC,CACjCC,KAAK,CAAEC,GAAG,EAAKC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC,CAAC,CACvC,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAG,YAAY,CAAIC,CAAC,EAAK,CAC1BlB,WAAW,CAAAmB,aAAA,CAAAA,aAAA,IAAMpB,QAAQ,MAAE,CAACmB,CAAC,CAACE,MAAM,CAACnB,IAAI,EAAGiB,CAAC,CAACE,MAAM,CAACC,KAAK,EAAE,CAAC,CAC/D,CAAC,CAED,KAAM,CAAAC,YAAY,CAAG,KAAO,CAAAJ,CAAC,EAAK,CAChCA,CAAC,CAACK,cAAc,CAAC,CAAC,CAElB;AACA,KAAM,CAAAC,cAAc,CAAG3B,QAAQ,CAAC4B,MAAM,CAAEC,CAAC,EAAKA,CAAC,CAACvB,IAAI,GAAKA,IAAI,CAAC,CAC9D,GAAIqB,cAAc,CAACG,MAAM,EAAI,CAAC,CAAE,CAC9B,MAAO,CAAAjB,GAAG,CAACkB,MAAM,CAAC,GAAG,CAAC,CAACjB,IAAI,CAAC,CAAEK,KAAK,CAAE,2BAA4B,CAAC,CAAC,CACrE,CAEA;AACA,KAAM,CAAAa,eAAe,CAAGL,cAAc,CAACM,IAAI,CAAEJ,CAAC,EAAKA,CAAC,CAACtB,IAAI,GAAKA,IAAI,CAAC,CACnE,GAAIyB,eAAe,CAAE,CACnB,MAAO,CAAAnB,GAAG,CACPkB,MAAM,CAAC,GAAG,CAAC,CACXjB,IAAI,CAAC,CAAEK,KAAK,CAAE,kCAAmC,CAAC,CAAC,CACxD,CAEA,GAAI,CACF,KAAM,CAAAN,GAAG,CAAG,KAAM,CAAAF,KAAK,CAAC,WAAW,CAAE,CACnCuB,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC/CC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACpC,QAAQ,CAC/B,CAAC,CAAC,CAEF,KAAM,CAAAa,IAAI,CAAG,KAAM,CAAAF,GAAG,CAACC,IAAI,CAAC,CAAC,CAC7B,GAAID,GAAG,CAAC0B,EAAE,CAAE,CACVtC,WAAW,CAAC,CAAC,GAAGD,QAAQ,CAAEe,IAAI,CAAC,CAAC,CAChCL,UAAU,CAAC,+BAA+B,CAAC,CAC3CP,WAAW,CAAC,CAAEC,IAAI,CAAE,EAAE,CAAEC,KAAK,CAAE,EAAE,CAAEC,IAAI,CAAE,EAAE,CAAEC,IAAI,CAAE,EAAE,CAAEC,OAAO,CAAE,EAAG,CAAC,CAAC,CACvE,CAAC,IAAM,CACLE,UAAU,CAACK,IAAI,CAACI,KAAK,EAAI,wBAAwB,CAAC,CACpD,CACF,CAAE,MAAOF,GAAG,CAAE,CACZC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC,CAClBP,UAAU,CAAC,4BAA4B,CAAC,CAC1C,CACF,CAAC,CAED;AACA,KAAM,CAAA8B,cAAc,CAAGxC,QAAQ,CAACyC,MAAM,CAAC,CAACC,GAAG,CAAEb,CAAC,GAAK,CACjDa,GAAG,CAACb,CAAC,CAACvB,IAAI,CAAC,CAAGoC,GAAG,CAACb,CAAC,CAACvB,IAAI,CAAC,EAAI,EAAE,CAC/BoC,GAAG,CAACb,CAAC,CAACvB,IAAI,CAAC,CAACqC,IAAI,CAACd,CAAC,CAAC,CACnB,MAAO,CAAAa,GAAG,CACZ,CAAC,CAAE,CAAC,CAAC,CAAC,CAEN,mBACE5C,KAAA,YAAS8C,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAClCjD,IAAA,OAAAiD,QAAA,CAAI,qBAAmB,CAAI,CAAC,CAC3BpC,OAAO,eAAIb,IAAA,MAAGgD,SAAS,CAAC,iBAAiB,CAAAC,QAAA,CAAEpC,OAAO,CAAI,CAAC,cAExDX,KAAA,SAAM8C,SAAS,CAAC,cAAc,CAACE,QAAQ,CAAErB,YAAa,CAAAoB,QAAA,eACpDjD,IAAA,UACEmD,IAAI,CAAC,MAAM,CACX3C,IAAI,CAAC,MAAM,CACX4C,WAAW,CAAC,MAAM,CAClBxB,KAAK,CAAEtB,QAAQ,CAACE,IAAK,CACrB6C,QAAQ,CAAE7B,YAAa,CACvB8B,QAAQ,MACT,CAAC,cACFtD,IAAA,UACEmD,IAAI,CAAC,OAAO,CACZ3C,IAAI,CAAC,OAAO,CACZ4C,WAAW,CAAC,OAAO,CACnBxB,KAAK,CAAEtB,QAAQ,CAACG,KAAM,CACtB4C,QAAQ,CAAE7B,YAAa,CACxB,CAAC,cACFxB,IAAA,UACEmD,IAAI,CAAC,MAAM,CACX3C,IAAI,CAAC,MAAM,CACXoB,KAAK,CAAEtB,QAAQ,CAACI,IAAK,CACrB2C,QAAQ,CAAE7B,YAAa,CACvB8B,QAAQ,MACT,CAAC,cACFtD,IAAA,UACEmD,IAAI,CAAC,MAAM,CACX3C,IAAI,CAAC,MAAM,CACXoB,KAAK,CAAEtB,QAAQ,CAACK,IAAK,CACrB0C,QAAQ,CAAE7B,YAAa,CACvB8B,QAAQ,MACT,CAAC,cACFpD,KAAA,WACEM,IAAI,CAAC,SAAS,CACdoB,KAAK,CAAEtB,QAAQ,CAACM,OAAQ,CACxByC,QAAQ,CAAE7B,YAAa,CACvB8B,QAAQ,MAAAL,QAAA,eAERjD,IAAA,WAAQ4B,KAAK,CAAC,EAAE,CAAAqB,QAAA,CAAC,gBAAc,CAAQ,CAAC,cACxCjD,IAAA,WAAQ4B,KAAK,CAAC,wBAAwB,CAAAqB,QAAA,CAAC,wBAAsB,CAAQ,CAAC,cACtEjD,IAAA,WAAQ4B,KAAK,CAAC,qBAAqB,CAAAqB,QAAA,CAAC,qBAAmB,CAAQ,CAAC,cAChEjD,IAAA,WAAQ4B,KAAK,CAAC,oBAAoB,CAAAqB,QAAA,CAAC,oBAAkB,CAAQ,CAAC,cAC9DjD,IAAA,WAAQ4B,KAAK,CAAC,iBAAiB,CAAAqB,QAAA,CAAC,iBAAe,CAAQ,CAAC,cACxDjD,IAAA,WAAQ4B,KAAK,CAAC,iBAAiB,CAAAqB,QAAA,CAAC,iBAAe,CAAQ,CAAC,cACxDjD,IAAA,WAAQ4B,KAAK,CAAC,uBAAuB,CAAAqB,QAAA,CAAC,uBAAqB,CAAQ,CAAC,cACpEjD,IAAA,WAAQ4B,KAAK,CAAC,4BAA4B,CAAAqB,QAAA,CAAC,4BAE3C,CAAQ,CAAC,EACH,CAAC,cACTjD,IAAA,WAAQmD,IAAI,CAAC,QAAQ,CAAAF,QAAA,CAAC,UAAQ,CAAQ,CAAC,EACnC,CAAC,cAEPjD,IAAA,OAAAiD,QAAA,CAAI,mBAAiB,CAAI,CAAC,cAG1B/C,KAAA,MAAG8C,SAAS,CAAC,eAAe,CAAAC,QAAA,EAAC,iBACZ,cAAAjD,IAAA,SAAMgD,SAAS,CAAC,UAAU,CAAAC,QAAA,CAAC,KAAG,CAAM,CAAC,sFAEtD,EAAG,CAAC,CAEH7C,QAAQ,CAAC8B,MAAM,GAAK,CAAC,cACpBlC,IAAA,MAAAiD,QAAA,CAAG,iBAAe,CAAG,CAAC,cAEtBjD,IAAA,QAAKgD,SAAS,CAAC,eAAe,CAAAC,QAAA,CAC3BM,MAAM,CAACC,IAAI,CAACZ,cAAc,CAAC,CACzBa,IAAI,CAAC,CAAC,CACNC,GAAG,CAAEhD,IAAI,eACRR,KAAA,QAAK8C,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3BjD,IAAA,OAAAiD,QAAA,CAAKvC,IAAI,CAAK,CAAC,CACdkC,cAAc,CAAClC,IAAI,CAAC,CAACwB,MAAM,EAAI,CAAC,eAC/BlC,IAAA,MAAGgD,SAAS,CAAC,UAAU,CAAAC,QAAA,CAAC,kBAAgB,CAAG,CAC5C,cACDjD,IAAA,OAAAiD,QAAA,CACGL,cAAc,CAAClC,IAAI,CAAC,CAACgD,GAAG,CAAEzB,CAAC,eAC1B/B,KAAA,OAAA+C,QAAA,EACGhB,CAAC,CAACtB,IAAI,CAAC,UAAG,CAACsB,CAAC,CAACzB,IAAI,CAAC,IAAE,CAACyB,CAAC,CAACrB,OAAO,CAAC,GAClC,GAFSqB,CAAC,CAAC0B,EAEP,CACL,CAAC,CACA,CAAC,GAX4BjD,IAY9B,CACN,CAAC,CACD,CACN,EACM,CAAC,CAEd,CAEA,cAAe,CAAAP,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}